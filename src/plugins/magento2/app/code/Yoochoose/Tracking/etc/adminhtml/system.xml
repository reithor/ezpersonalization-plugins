<?xml version="1.0"?>

<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xsd">
    <system>
        <tab id="yoochoose" translate="label" sortOrder="100">
            <label>
                <![CDATA[<img style="width: 16px; margin-left: -5px; margin-right: 5px; vertical-align: bottom;" src="data:image/png;base64,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"/> Yoochoose Recommendations]]>
            </label>
        </tab>
        <section id="yoochoose" translate="label" sortOrder="130" showInDefault="1" showInWebsite="1" showInStore="1">
            <class>separator-top</class>
            <label>Configuration</label>
            <tab>yoochoose</tab>
            <resource>Yoochoose_Tracking::configuration</resource>
            <group id="general" translate="label" type="text" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>General</label>
                <field id="register_button" translate="label" sortOrder="1" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label>If you don't have a Customer ID yet, please register a new Yoochoose account</label>
                    <frontend_model>Yoochoose\Tracking\Model\Config\Source\RegisterButton</frontend_model>
                    <comment><![CDATA[For more information about pricing, data privacy and terms of service please visit the <a href='https://www.yoochoose.com' target='_blank'>
                                     Yoochoose website</a>.
                                     <script>
                                         function yc_register(url, object) {
                                            var form = document.createElement('form'),
                                                input = document.createElement('input');

                                            form.method = 'post';
                                            form.action = url;
                                            form.target = '_blank';

                                            for (var property in object) {
                                                if (object.hasOwnProperty(property)) {
                                                    input.setAttribute('name', property);
                                                    input.setAttribute('value', object[property]);
                                                    form.appendChild(input.cloneNode(true));
                                                }
                                            }
                                            
                                           document.body.appendChild(form);
                                           form.submit();
                                        }
                                    </script>
                                ]]></comment>
                </field>
                <field id="customer_id" translate="label" type="text" sortOrder="2" showInDefault="0" showInWebsite="1" showInStore="1">
                    <label>Customer ID</label>
                    <validate>required-entry</validate>
                </field>
                <field id="license_key" translate="label" type="text" sortOrder="3" showInDefault="0" showInWebsite="1" showInStore="1">
                    <label>License Key</label>
                    <validate>required-entry</validate>
                    <comment><![CDATA[
                            	You can find your license key and detailed statistics on the
                            	<a id="ycLicenceLink" href='https://admin.yoochoose.net?customer_id={{mandator_id}}' target='_blank'>
                            	Yoochoose Configuration Backend</a>.
                                <script>
                                    document.getElementById('yoochoose_general_customer_id').addEventListener('keyup', function (el) {
                                        var link = document.getElementById('ycLicenceLink');
                                        link.href = link.href.replace(/(.*=)(\d*)/g, function () {
                                            return arguments[1] + el.currentTarget.value;
                                        });
                                    });
                                    window.addEventListener('load', function(){
                                        var link = document.getElementById('ycLicenceLink'),
                                            mandator = document.getElementById('yoochoose_general_customer_id').value;

                                        link.href = link.href.replace('{{mandator_id}}', mandator);
                                     });
                                </script>
                            ]]>
                    </comment>
                </field>
                <field id="plugin_id" translate="label" type="text" sortOrder="4" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Plugin ID</label>
                    <comment>Optional field. If you have only one shop, please leave this field blank.</comment>
                </field>
                <field id="endpoint" translate="label" type="text" sortOrder="5" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Endpoint</label>
                    <frontend_model>Yoochoose\Tracking\Model\Config\Source\ReadOnly</frontend_model>
                </field>
                <field id="design" translate="label" type="text" sortOrder="6" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Design</label>
                    <frontend_model>Yoochoose\Tracking\Model\Config\Source\ReadOnly</frontend_model>
                    <comment>
                        <![CDATA[We will try to find a design template for your shop. If you need to customize the Recommendations design, please read the
                                        <a href="https://doc.yoochoose.net/display/PUBDOC/Magento2+Connect+Extension+Tutorial" target="_blank">Magento Connect Extension Tutorial</a>.]]>
                    </comment>
                </field>
                <field id="item_type" translate="label" type="text" sortOrder="7" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Item Type</label>
                    <validate>required-entry validate-not-negative-number</validate>
                    <comment>
                        <![CDATA[
                                 In most cases the item type must be set to 1.
                                 If more than one type is needed or if more than one shop language is supported, please read the <a href="https://doc.ez.no/display/EZSERVICES/eZ+Personalization+Solution" target="_blank" >User Guide</a>.]]>
                    </comment>
                </field>
                <field id="log_id" translate="label" type="select" sortOrder="8" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Log Severity</label>
                    <source_model>Yoochoose\Tracking\Model\Config\Source\LogSeverity</source_model>
                </field>
            </group>
            <group id="script" translate="label" type="text" sortOrder="20" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>Script Endpoint</label>
                <field id="cdn_source" translate="label" type="select" sortOrder="1" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Performance</label>
                    <source_model>Yoochoose\Tracking\Model\Config\Source\ScriptSource</source_model>
                    <comment><![CDATA[
                        CDN mode delivers better performance
                            but takes about 30 minutes to update if the configuration is changed.
                            Please switch to CDN only if the configuration is finished and stable.
                    ]]></comment>
                </field>
                <field id="script_id" translate="label" type="text" sortOrder="2" showInDefault="1" showInWebsite="1" showInStore="1">
                    <backend_model>Yoochoose\Tracking\Model\Config\Validation\Script</backend_model>
                    <label>Overwrite Endpoint</label>
                    <comment><![CDATA[This option is used mostly during development phase.]]></comment>
                </field>
            </group>
            <group id="search"  type="text" sortOrder="30" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>Yoochoose Search Box</label>
                <field id="search_enable" translate="label" type="select" sortOrder="9" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label><![CDATA[
                    Use the Yoochoose search box:<br/>(recommended)
                     ]]></label>
                    <source_model>Yoochoose\Tracking\Model\Config\Source\SearchOption</source_model>
                    <comment><![CDATA[
                    Select this option to use the Yoochoose search box instead of the standard Magento search box. Benefit from a cloud-based, high-performance search engine with "self-learning" recommendation capability.
                    ]]></comment>
                </field>
            </group>
            <group id="auth"  type="text" sortOrder="40" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>Yoochoose Authorization</label>
                <field id="auth_token" translate="label" type="text" sortOrder="1" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Authorization Token</label>
                    <frontend_model>Yoochoose\Tracking\Model\Config\Source\Token</frontend_model>
                    <comment>
                        <![CDATA[This token is used for API authentication.]]>
                    </comment>
                </field>
                <field id="auth_token_reset" translate="label" type="text" sortOrder="2" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label>Reset Token</label>
                    <frontend_model>Yoochoose\Tracking\Model\Config\Source\TokenResetButton</frontend_model>
                    <comment>
                        <![CDATA[
                                <span id="ycAuthHidden" style="color: red; display: none;">Click "Save Config" to complete the Token Reset.</span>
                                <script type="text/javascript">
                                    function ycAuthTokenReset() {
                                        var authToken = document.getElementById('yoochoose_auth_auth_token');
                                        var text = '';
                                        var possible = 'abcdefghijklmnopqrstuvwxyz0123456789';

                                        for (var i = 0; i < 32; i++) {
                                            text += possible.charAt(Math.floor(Math.random() * possible.length));
                                        }

                                        authToken.value = text;
                                        document.getElementById('ycAuthHidden').style.display = 'block';
                                    }
                                </script>
                            ]]>
                    </comment>
                </field>
            </group>
        </section>
    </system>
</config>

<!--<source_model>Magento\Config\Model\Config\Source\Yesno</source_model>-->
